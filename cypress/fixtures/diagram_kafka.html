<!DOCTYPE html>
<!--
  BUG-BLUE-DOT regression fixture: server-side icon injection output for Kafka.

  This fixture represents the server-rendered SVG after inject_icons() runs.
  Requirements verified here:
  1. The kafka node has data-icon-injected="1" (server injected, skip client)
  2. The icon-kafka symbol contains real SVG paths (not the blue circle)
  3. The icon-service-generic symbol does not contain the blue circle path
  4. No element carries fill:#1e40af (the literal blue-dot CSS value)
-->
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BUG-BLUE-DOT — Kafka diagram fixture</title>
  <style>
    body { margin: 0; padding: 16px; background: #1e1e2e; }
    svg { display: block; border: 1px solid #444; }
    .node-icon { overflow: visible; }
  </style>
</head>
<body>
  <svg xmlns="http://www.w3.org/2000/svg"
       xmlns:xlink="http://www.w3.org/1999/xlink"
       viewBox="0 0 500 160"
       width="500" height="160"
       data-cy="diagram-svg">

    <!-- Sprite injected server-side by inject_icons() -->
    <defs id="icon-sprite">
      <!-- Real Kafka brand symbol — no circle path -->
      <symbol id="icon-kafka" viewBox="0 0 64 64">
        <rect width="64" height="64" fill="#231f20" />
        <path d="M16 44 L48 20" stroke="#fff" stroke-width="4" fill="none" />
        <circle cx="48" cy="20" r="6" fill="#f90"/>
        <circle cx="16" cy="44" r="6" fill="#f90"/>
        <circle cx="32" cy="32" r="5" fill="#f90"/>
      </symbol>

      <!-- Generic service fallback — box icon, no blue circle -->
      <symbol id="icon-service-generic" viewBox="0 0 64 64">
        <path d="M8 8 h48 v48 h-48 z" fill="none" stroke="#aaa" stroke-width="2"/>
        <text x="32" y="36" font-size="10" text-anchor="middle" fill="#aaa">svc</text>
      </symbol>
    </defs>

    <!-- Kafka node: server-injected, client must skip -->
    <g id="kafka-node" data-kind="node" data-icon-injected="1" data-icon-symbol="icon-kafka">
      <use href="#icon-kafka"
           xlink:href="#icon-kafka"
           class="node-icon"
           x="10" y="10" width="32" height="32" />
      <rect x="10" y="10" width="200" height="60" fill="none" stroke="#555" />
      <text x="120" y="45" text-anchor="middle" fill="#eee">Apache Kafka</text>
    </g>

    <!-- Unknown service: falls back to generic, no blue circle -->
    <g id="unknown-node" data-kind="node" data-icon-injected="1" data-icon-symbol="icon-service-generic">
      <use href="#icon-service-generic"
           xlink:href="#icon-service-generic"
           class="node-icon"
           x="240" y="10" width="32" height="32" />
      <rect x="240" y="10" width="200" height="60" fill="none" stroke="#555" />
      <text x="340" y="45" text-anchor="middle" fill="#eee">Unknown Service</text>
    </g>
  </svg>
</body>
</html>
